# Sitelist Generator - sitelists.json ç”Ÿæˆå·¥å…·

è¿™ä¸ªå·¥å…·ç”¨äºæ ¹æ® `data/Site/` ç›®å½•ä¸­çš„ JSON æ–‡ä»¶é‡æ–°ç”Ÿæˆ `sitelists.json`ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œæ—¶é—´å‡†ç¡®æ€§ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ”„ **è‡ªåŠ¨åŒæ­¥**ï¼šæ ¹æ® `data/Site/` ä¸­çš„å®é™…æ–‡ä»¶ç”Ÿæˆ `sitelists.json`
- ğŸ—‘ï¸ **æ¸…ç†æ— æ•ˆæ•°æ®**ï¼šè‡ªåŠ¨ç§»é™¤ä¸å­˜åœ¨çš„ç«™ç‚¹å’Œæ— æ•ˆæ¡ç›®
- â° **æ—¶é—´å‡†ç¡®æ€§**ï¼šä¿ç•™åŸæœ‰çš„åˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°ä¿®æ”¹æ—¶é—´
- ğŸ’¾ **å®‰å…¨å¤‡ä»½**ï¼šè‡ªåŠ¨åˆ›å»ºåŸæ–‡ä»¶å¤‡ä»½
- ğŸ›¡ï¸ **æ•°æ®éªŒè¯**ï¼šéªŒè¯æ¡ç›®æœ‰æ•ˆæ€§ï¼Œè¿‡æ»¤è„æ•°æ®
- ğŸ“Š **è¯¦ç»†æŠ¥å‘Š**ï¼šæä¾›å¤„ç†ç»“æœå’Œç»Ÿè®¡ä¿¡æ¯

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ
node .doc/sitelistGen/generateSitelists.js
```

æˆ–è€…ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™åç›´æ¥è¿è¡Œï¼š

```bash
chmod +x .doc/sitelistGen/generateSitelists.js
./.doc/sitelistGen/generateSitelists.js
```

## å¤„ç†é€»è¾‘

### 1. æ–‡ä»¶æ‰«æ
- æ‰«æ `data/Site/` ç›®å½•ä¸­çš„æ‰€æœ‰ `.json` æ–‡ä»¶
- ä»æ–‡ä»¶åæå– `slug`ï¼ˆç§»é™¤ `.json` æ‰©å±•åï¼‰

### 2. æ•°æ®è¯»å–
- è¯»å–æ¯ä¸ª JSON æ–‡ä»¶çš„ `name_zh` å’Œ `name_en` å­—æ®µ
- è·å–æ–‡ä»¶çš„åˆ›å»ºå’Œä¿®æ”¹æ—¶é—´æˆ³

### 3. æ—¶é—´æˆ³å¤„ç†
- **æ–°æ–‡ä»¶**ï¼šä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿçš„åˆ›å»ºå’Œä¿®æ”¹æ—¶é—´
- **ç°æœ‰æ–‡ä»¶**ï¼šä¿ç•™åŸæœ‰çš„åˆ›å»ºæ—¶é—´ï¼ˆ`date`ï¼‰ï¼Œæ›´æ–°ä¿®æ”¹æ—¶é—´ï¼ˆ`lastModified`ï¼‰

### 4. æ•°æ®éªŒè¯
è‡ªåŠ¨è¿‡æ»¤ä»¥ä¸‹æ— æ•ˆæ¡ç›®ï¼š
- ç¼ºå°‘ `name_zh` å’Œ `name_en` çš„æ¡ç›®
- åŒ…å«æ— æ•ˆ slug æ¨¡å¼çš„æ¡ç›®ï¼š
  - `-`ï¼ˆå•ä¸ªè¿å­—ç¬¦ï¼‰
  - `unknown-site`
  - æè¿°æ€§æ–‡æœ¬ç‰‡æ®µ
- åç§°å­—æ®µåŒ…å«æè¿°æ€§æ–‡æœ¬è€ŒéçœŸå®ç«™ç‚¹åç§°çš„æ¡ç›®

### 5. è¾“å‡ºæ ¼å¼
ç”Ÿæˆçš„æ¯ä¸ªæ¡ç›®åŒ…å«ï¼š
```json
{
  "name_zh": "ç«™ç‚¹ä¸­æ–‡å",
  "name_en": "Site English Name",
  "slug": "site-slug",
  "date": "2024-01-01T00:00:00.000Z",
  "lastModified": "2024-01-02T00:00:00.000Z"
}
```

## è¾“å‡ºç¤ºä¾‹

```
ğŸš€ Starting sitelists.json generation...
ğŸ“Š Loaded timestamps for 7 existing sites
ğŸ“ Found 12 JSON files in Site directory
âœ… Processed: ruan-yifengs-blog-weekly.json (é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—)
âœ… Processed: phoenix-frontier.json (ä¸æ­»é¸Ÿ)
âœ… Processed: dig-internet.json (æŒ–äº’è”ç½‘)
...
ğŸ’¾ Created backup: sitelists.json.backup.1691234567890

ğŸ‰ Sitelists generation completed!
âœ… Processed: 12 sites
â­ï¸  Skipped: 0 files
ğŸ“Š Total entries in sitelists.json: 19

ğŸ“ˆ Statistics:
   ğŸ“‹ Bilingual sites: 17
   ğŸ‡¨ğŸ‡³ Chinese only: 1
   ğŸ‡ºğŸ‡¸ English only: 1
```

## å®‰å…¨ç‰¹æ€§

### è‡ªåŠ¨å¤‡ä»½
- åœ¨è¦†ç›–åŸæ–‡ä»¶å‰è‡ªåŠ¨åˆ›å»ºå¤‡ä»½
- å¤‡ä»½æ–‡ä»¶æ ¼å¼ï¼š`sitelists.json.backup.{timestamp}`
- å¯ç”¨äºæ¢å¤åŸæ•°æ®

### æ•°æ®éªŒè¯
- éªŒè¯å¿…è¦å­—æ®µçš„å­˜åœ¨
- è¿‡æ»¤æ˜æ˜¾çš„è„æ•°æ®å’Œæè¿°æ€§æ–‡æœ¬
- ç¡®ä¿ slug çš„æœ‰æ•ˆæ€§

### é”™è¯¯å¤„ç†
- å•ä¸ªæ–‡ä»¶é”™è¯¯ä¸å½±å“æ•´ä½“å¤„ç†
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œè­¦å‘Šä¿¡æ¯
- ä¼˜é›…çš„é”™è¯¯æ¢å¤æœºåˆ¶

## é«˜çº§åŠŸèƒ½

### æ‰¹é‡æ¸…ç†
è„šæœ¬ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶ç§»é™¤ä»¥ä¸‹ç±»å‹çš„æ— æ•ˆæ•°æ®ï¼š
- ä¸å®Œæ•´çš„ç«™ç‚¹ä¿¡æ¯
- é‡å¤æˆ–å†²çªçš„æ¡ç›®
- CSV è§£æé”™è¯¯äº§ç”Ÿçš„è„æ•°æ®
- æè¿°æ€§æ–‡æœ¬ç‰‡æ®µ

### æ—¶é—´æˆ³ç®¡ç†
- **åˆ›å»ºæ—¶é—´ä¿æŒä¸å˜**ï¼šç¡®ä¿ç«™ç‚¹çš„åŸå§‹æ·»åŠ æ—¶é—´å‡†ç¡®
- **ä¿®æ”¹æ—¶é—´å®æ—¶æ›´æ–°**ï¼šåæ˜ æ–‡ä»¶çš„æœ€æ–°ä¿®æ”¹çŠ¶æ€
- **æ—¶é—´æ ¼å¼æ ‡å‡†åŒ–**ï¼šç»Ÿä¸€ä½¿ç”¨ ISO 8601 æ ¼å¼

## æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½é‡è¦**ï¼šè™½ç„¶è„šæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½ï¼Œä½†å»ºè®®æ‰‹åŠ¨å¤‡ä»½é‡è¦æ•°æ®
2. **æ–‡ä»¶å®Œæ•´æ€§**ï¼šç¡®ä¿ `data/Site/` ä¸­çš„ JSON æ–‡ä»¶æ ¼å¼æ­£ç¡®
3. **æƒé™æ£€æŸ¥**ï¼šç¡®ä¿è„šæœ¬æœ‰è¯»å†™ç›¸å…³ç›®å½•å’Œæ–‡ä»¶çš„æƒé™
4. **å®šæœŸè¿è¡Œ**ï¼šå»ºè®®åœ¨æ·»åŠ æ–°ç«™ç‚¹æˆ–ä¿®æ”¹ç°æœ‰ç«™ç‚¹åè¿è¡Œæ­¤è„šæœ¬

## é¢å¤–å·¥å…·

### éªŒè¯è„šæœ¬
éªŒè¯ç”Ÿæˆçš„ `sitelists.json` ä¸å®é™…æ–‡ä»¶çš„ä¸€è‡´æ€§ï¼š

```bash
node .doc/sitelistGen/validateSitelists.js
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ” Starting sitelists.json validation...
ğŸ“ Found 12 JSON files in Site directory
ğŸ“‹ Found 12 entries in sitelists.json

âœ… Perfect sync! All files are properly listed.

ğŸ“Š Validation Summary:
   âœ… Synced files: 12
   âŒ Missing from sitelists: 0
   âŒ Orphaned entries: 0
```

## ä¸å…¶ä»–å·¥å…·çš„é›†æˆ

### ä¸ CSV è½¬æ¢å·¥å…·é…åˆä½¿ç”¨
```bash
# 1. å…ˆè½¬æ¢ CSV åˆ° JSON
node .doc/siteGen/csvToJson.js

# 2. æ¸…ç†ç”Ÿæˆçš„ sitelists.json
node .doc/sitelistGen/generateSitelists.js

# 3. éªŒè¯ç»“æœ
node .doc/sitelistGen/validateSitelists.js
```

### åœ¨ CI/CD ä¸­ä½¿ç”¨
å¯ä»¥å°†æ­¤è„šæœ¬é›†æˆåˆ°æŒç»­é›†æˆæµç¨‹ä¸­ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼š
```bash
# package.json scripts
{
  "scripts": {
    "update-sitelists": "node .doc/sitelistGen/generateSitelists.js",
    "deploy": "npm run update-sitelists && npm run build"
  }
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: è„šæœ¬è¿è¡Œåæ¡ç›®æ•°é‡å‡å°‘äº†**
A: è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ¸…ç†æ— æ•ˆæ•°æ®ã€‚æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºäº†è§£å“ªäº›æ¡ç›®è¢«è·³è¿‡ã€‚

**Q: æ—¶é—´æˆ³ä¿¡æ¯ä¸¢å¤±**
A: è„šæœ¬ä¼šå°½é‡ä¿ç•™åŸæœ‰æ—¶é—´ä¿¡æ¯ã€‚å¦‚æœæ–‡ä»¶ç³»ç»Ÿä¸æ”¯æŒï¼Œä¼šä½¿ç”¨å½“å‰æ—¶é—´ã€‚

**Q: æŸäº›ç«™ç‚¹æ²¡æœ‰å‡ºç°åœ¨ç»“æœä¸­**
A: æ£€æŸ¥å¯¹åº”çš„ JSON æ–‡ä»¶æ˜¯å¦å­˜åœ¨äº `data/Site/` ç›®å½•ï¼Œä»¥åŠæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚
